schema: '2.0'
stages:
  prepare_data:
    cmd: python prepare_data.py
    deps:
    - path: data/imdb_dataset.csv
      hash: md5
      md5: 308443a50e5c993e7b8a1cdb95750026
      size: 66212309
    - path: prepare_data.py
      hash: md5
      md5: fd56008e6fc7fb55df07b111799f7cf7
      size: 652
    params:
      params.yaml:
        data:
          csv_file_path: ./data/imdb_dataset.csv
          test_set_ratio: 0.3
          train_csv_save_path: ./data/train.csv
          test_csv_save_path: ./data/test.csv
    outs:
    - path: data/test.csv
      hash: md5
      md5: 894156d804ff92f7c0f39fe94b9ce47f
      size: 20067457
    - path: data/train.csv
      hash: md5
      md5: cef7ec9dfb2009a9f64293451e2ee5d2
      size: 46244881
  make_features:
    cmd: python make_features.py
    deps:
    - path: data/test.csv
      hash: md5
      md5: 894156d804ff92f7c0f39fe94b9ce47f
      size: 20067457
    - path: data/train.csv
      hash: md5
      md5: cef7ec9dfb2009a9f64293451e2ee5d2
      size: 46244881
    - path: make_features.py
      hash: md5
      md5: 95248f3a77352ecc46ab20b578cc8ead
      size: 908
    params:
      params.yaml:
        features:
          vectorizer: count-vectorizer
          train_features_save_path: ./data/train.joblib
          test_features_save_path: ./data/test.joblib
    outs:
    - path: data/test.joblib
      hash: md5
      md5: b38319fc97b761c2b4a11e9a7d575634
      size: 15972091
    - path: data/train.joblib
      hash: md5
      md5: 4e5b3ebeac46d9ee380e2fe6edc75479
      size: 37248763
  train:
    cmd: python train.py
    deps:
    - path: data/train.csv
      hash: md5
      md5: cef7ec9dfb2009a9f64293451e2ee5d2
      size: 46244881
    - path: data/train.joblib
      hash: md5
      md5: 4e5b3ebeac46d9ee380e2fe6edc75479
      size: 37248763
    - path: train.py
      hash: md5
      md5: 4ab366907f98cc5e7ee421c30e7db649
      size: 743
    params:
      params.yaml:
        train:
          penalty: l2
          C: 1.0
          solver: lbfgs
          model_save_path: ./data/model.joblib
          max_iter: 1000
    outs:
    - path: data/model.joblib
      hash: md5
      md5: 793f8ff287286c1e2f2bddfe23ab9f33
      size: 697519
  evaluate:
    cmd: python evaluate.py
    deps:
    - path: data/model.joblib
      hash: md5
      md5: 793f8ff287286c1e2f2bddfe23ab9f33
      size: 697519
    - path: data/test.csv
      hash: md5
      md5: 894156d804ff92f7c0f39fe94b9ce47f
      size: 20067457
    - path: data/test.joblib
      hash: md5
      md5: b38319fc97b761c2b4a11e9a7d575634
      size: 15972091
    - path: evaluate.py
      hash: md5
      md5: c60002b50bdf3c87b32a431ce6d54705
      size: 962
    params:
      params.yaml:
        evaluate:
          metric: accuracy
          results_save_path: ./data/results.yaml
    outs:
    - path: data/results.yaml
      hash: md5
      md5: 08124e92a6e0d9ba7fe0a651b06b56f9
      size: 16
